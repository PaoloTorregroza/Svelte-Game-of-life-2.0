var Ye=Object.defineProperty;var De=(e,t,n)=>t in e?Ye(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var M=(e,t,n)=>De(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function W(){}function Pe(e){return e()}function We(){return Object.create(null)}function F(e){e.forEach(Pe)}function Le(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ge(e){return Object.keys(e).length===0}function Ke(e,...t){if(e==null){for(const l of t)l(void 0);return W}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function E(e,t,n){e.$$.on_destroy.push(Ke(t,n))}function h(e,t){e.appendChild(t)}function P(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function se(e){return document.createTextNode(e)}function x(){return se(" ")}function Ue(){return se("")}function N(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ie(e){return e===""?null:+e}function Ve(e){return Array.from(e.childNodes)}function A(e,t){e.value=t??""}function Je(e,t,n,l){e.style.setProperty(t,n,"")}function Qe(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}let Q;function J(e){Q=e}function Ze(){if(!Q)throw new Error("Function called outside component initialization");return Q}function Te(){const e=Ze();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=Qe(t,n,{cancelable:l});return r.slice().forEach(u=>{u.call(e,o)}),!o.defaultPrevented}return!0}}const G=[],Ae=[];let K=[];const Ie=[],et=Promise.resolve();let _e=!1;function tt(){_e||(_e=!0,et.then(ze))}function me(e){K.push(e)}const be=new Set;let Y=0;function ze(){if(Y!==0)return;const e=Q;do{try{for(;Y<G.length;){const t=G[Y];Y++,J(t),nt(t.$$)}}catch(t){throw G.length=0,Y=0,t}for(J(null),G.length=0,Y=0;Ae.length;)Ae.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];be.has(n)||(be.add(n),n())}K.length=0}while(G.length);for(;Ie.length;)Ie.pop()();_e=!1,be.clear(),J(e)}function nt(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(me)}}function lt(e){const t=[],n=[];K.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),K=t}const le=new Set;let q;function qe(){q={r:0,c:[],p:q}}function Xe(){q.r||F(q.c),q=q.p}function X(e,t){e&&e.i&&(le.delete(e),e.i(t))}function U(e,t,n,l){if(e&&e.o){if(le.has(e))return;le.add(e),q.c.push(()=>{le.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function ue(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Fe(e,t){U(e,1,1,()=>{t.delete(e.key)})}function Re(e,t,n,l,r,o,u,i,c,s,f,a){let w=e.length,b=o.length,y=w;const j={};for(;y--;)j[e[y].key]=y;const C=[],H=new Map,B=new Map,O=[];for(y=b;y--;){const d=a(r,o,y),_=n(d);let m=u.get(_);m?O.push(()=>m.p(d,t)):(m=s(_,d),m.c()),H.set(_,C[y]=m),_ in j&&B.set(_,Math.abs(y-j[_]))}const R=new Set,$=new Set;function L(d){X(d,1),d.m(i,f),u.set(d.key,d),f=d.first,b--}for(;w&&b;){const d=C[b-1],_=e[w-1],m=d.key,v=_.key;d===_?(f=d.first,w--,b--):H.has(v)?!u.has(m)||R.has(m)?L(d):$.has(v)?w--:B.get(m)>B.get(v)?($.add(m),L(d)):(R.add(v),w--):(c(_,u),w--)}for(;w--;){const d=e[w];H.has(d.key)||c(d,u)}for(;b;)L(C[b-1]);return F(O),C}function ye(e){e&&e.c()}function ce(e,t,n){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),me(()=>{const o=e.$$.on_mount.map(Pe).filter(Le);e.$$.on_destroy?e.$$.on_destroy.push(...o):F(o),e.$$.on_mount=[]}),r.forEach(me)}function ae(e,t){const n=e.$$;n.fragment!==null&&(lt(n.after_update),F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function rt(e,t){e.$$.dirty[0]===-1&&(G.push(e),tt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function he(e,t,n,l,r,o,u=null,i=[-1]){const c=Q;J(e);const s=e.$$={fragment:null,ctx:[],props:o,update:W,not_equal:r,bound:We(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:We(),dirty:i,skip_bound:!1,root:t.target||c.$$.root};u&&u(s.root);let f=!1;if(s.ctx=n?n(e,t.props||{},(a,w,...b)=>{const y=b.length?b[0]:w;return s.ctx&&r(s.ctx[a],s.ctx[a]=y)&&(!s.skip_bound&&s.bound[a]&&s.bound[a](y),f&&rt(e,a)),w}):[],s.update(),f=!0,F(s.before_update),s.fragment=l?l(s.ctx):!1,t.target){if(t.hydrate){const a=Ve(t.target);s.fragment&&s.fragment.l(a),a.forEach(I)}else s.fragment&&s.fragment.c();t.intro&&X(e.$$.fragment),ce(e,t.target,t.anchor),ze()}J(c)}class ge{constructor(){M(this,"$$");M(this,"$$set")}$destroy(){ae(this,1),this.$destroy=W}$on(t,n){if(!Le(n))return W;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!Ge(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const ot="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(ot);const D=[];function V(e,t=W){let n;const l=new Set;function r(i){if(Z(e,i)&&(e=i,n)){const c=!D.length;for(const s of l)s[1](),D.push(s,e);if(c){for(let s=0;s<D.length;s+=2)D[s][0](D[s+1]);D.length=0}}}function o(i){r(i(e))}function u(i,c=W){const s=[i,c];return l.add(s),l.size===1&&(n=t(r,o)||W),i(e),()=>{l.delete(s),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:u}}const fe=V(38),de=V(14),ve=V("#CC3300"),we=V("#15172B"),xe=V(!1),re=V(!1);function st(e){let t,n,l,r,o,u,i,c,s,f,a,w,b,y,j,C,H,B,O,R,$,L,d,_,m,v,ke,ee,Ce,te,Ee,T,Be,Ne,z,$e,ne,pe,Se;return{c(){t=p("h1"),t.textContent="Game of life",n=x(),l=p("div"),r=p("div"),o=p("p"),o.textContent="Board size:",u=x(),i=p("input"),c=x(),s=p("p"),s.textContent="X",f=x(),a=p("input"),w=x(),b=p("div"),y=p("p"),y.textContent="Cell dead color:",j=x(),C=p("input"),H=x(),B=p("div"),O=p("p"),O.textContent="Cell alive color:",R=x(),$=p("input"),L=x(),d=p("div"),_=p("p"),_.textContent="Torus enabled:",m=x(),v=p("input"),ke=x(),ee=p("button"),ee.textContent="Random board",Ce=x(),te=p("button"),te.textContent="Clear board",Ee=x(),T=p("button"),Be=se("Start"),Ne=x(),z=p("button"),$e=se("Pause"),g(o,"class","settings-label"),g(i,"class","settings-input"),g(i,"placeholder","0"),g(i,"type","number"),g(i,"max","101"),g(a,"class","settings-input"),g(a,"placeholder","0"),g(a,"type","number"),g(a,"max","101"),g(r,"class","settings-element svelte-13lxjxc"),g(y,"class","settings-label"),g(C,"class","settings-input"),g(C,"type","color"),g(b,"class","settings-element svelte-13lxjxc"),g(O,"class","settings-label"),g($,"class","settings-input"),g($,"type","color"),g(B,"class","settings-element svelte-13lxjxc"),g(_,"class","settings-label"),g(v,"class","settings-input"),g(v,"type","checkbox"),g(d,"class","settings-element svelte-13lxjxc"),T.disabled=e[5],g(T,"class","controll-button svelte-13lxjxc"),z.disabled=ne=!e[5],g(z,"class","controll-button svelte-13lxjxc"),g(l,"class","settings svelte-13lxjxc")},m(k,S){P(k,t,S),P(k,n,S),P(k,l,S),h(l,r),h(r,o),h(r,u),h(r,i),A(i,e[0]),h(r,c),h(r,s),h(r,f),h(r,a),A(a,e[1]),h(l,w),h(l,b),h(b,y),h(b,j),h(b,C),A(C,e[2]),h(l,H),h(l,B),h(B,O),h(B,R),h(B,$),A($,e[3]),h(l,L),h(l,d),h(d,_),h(d,m),h(d,v),A(v,e[4]),h(l,ke),h(l,ee),h(l,Ce),h(l,te),h(l,Ee),h(l,T),h(T,Be),h(l,Ne),h(l,z),h(z,$e),pe||(Se=[N(i,"input",e[9]),N(i,"input",e[7]),N(a,"input",e[10]),N(a,"input",e[8]),N(C,"input",e[11]),N($,"input",e[12]),N(v,"change",e[13]),N(ee,"click",e[14]),N(te,"click",e[15]),N(T,"click",e[16]),N(z,"click",e[17])],pe=!0)},p(k,[S]){S&1&&ie(i.value)!==k[0]&&A(i,k[0]),S&2&&ie(a.value)!==k[1]&&A(a,k[1]),S&4&&A(C,k[2]),S&8&&A($,k[3]),S&16&&A(v,k[4]),S&32&&(T.disabled=k[5]),S&32&&ne!==(ne=!k[5])&&(z.disabled=ne)},i:W,o:W,d(k){k&&(I(t),I(n),I(l)),pe=!1,F(Se)}}}function it(e,t,n){let l,r,o,u,i,c;E(e,de,d=>n(18,l=d)),E(e,fe,d=>n(19,r=d)),E(e,we,d=>n(2,o=d)),E(e,ve,d=>n(3,u=d)),E(e,xe,d=>n(4,i=d)),E(e,re,d=>n(5,c=d));const s=Te();let f=r,a=l;function w(d){const _=d.currentTarget.value;let m=parseInt(_)||0,v=m>101?101:m;fe.set(v),n(0,f=v)}function b(d){const _=d.currentTarget.value;let m=parseInt(_)||0,v=m>101?101:m;de.set(v),n(1,a=v)}function y(){f=ie(this.value),n(0,f)}function j(){a=ie(this.value),n(1,a)}function C(){o=this.value,we.set(o)}function H(){u=this.value,ve.set(u)}function B(){i=this.value,xe.set(i)}return[f,a,o,u,i,c,s,w,b,y,j,C,H,B,()=>s("randomBoard"),()=>s("clearBoard"),()=>re.set(!0),()=>re.set(!1)]}class ut extends ge{constructor(t){super(),he(this,t,it,st,Z,{})}}class oe{constructor(){M(this,"alive");this.alive=!1}}function ct(e){let t,n,l,r;return{c(){t=p("button"),g(t,"class","cell svelte-gburun"),g(t,"style",n=e[0].alive?"background-color: "+e[1]:"background-color: "+e[2])},m(o,u){P(o,t,u),l||(r=N(t,"click",e[3]),l=!0)},p(o,[u]){u&7&&n!==(n=o[0].alive?"background-color: "+o[1]:"background-color: "+o[2])&&g(t,"style",n)},i:W,o:W,d(o){o&&I(t),l=!1,r()}}}function at(e,t,n){let l,r;E(e,ve,s=>n(1,l=s)),E(e,we,s=>n(2,r=s));let{cell:o}=t,{cell_index:u}=t;const i=Te();function c(){i("switchState",{index:u})}return e.$$set=s=>{"cell"in s&&n(0,o=s.cell),"cell_index"in s&&n(4,u=s.cell_index)},[o,l,r,c,u]}class ft extends ge{constructor(t){super(),he(this,t,at,ct,Z,{cell:0,cell_index:4})}}function je(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function He(e,t,n){const l=e.slice();return l[5]=t[n],l[9]=n,l}function Oe(e,t){let n,l,r;return l=new ft({props:{cell_index:t[3](t[7],t[9]),cell:t[0][t[3](t[7],t[9])]}}),l.$on("switchState",t[4]),{key:e,first:null,c(){n=Ue(),ye(l.$$.fragment),this.first=n},m(o,u){P(o,n,u),ce(l,o,u),r=!0},p(o,u){t=o;const i={};u&6&&(i.cell_index=t[3](t[7],t[9])),u&7&&(i.cell=t[0][t[3](t[7],t[9])]),l.$set(i)},i(o){r||(X(l.$$.fragment,o),r=!0)},o(o){U(l.$$.fragment,o),r=!1},d(o){o&&I(n),ae(l,o)}}}function Me(e,t){let n,l=[],r=new Map,o,u,i=ue({length:t[1]});const c=s=>"cell-"+s[9];for(let s=0;s<i.length;s+=1){let f=He(t,i,s),a=c(f);r.set(a,l[s]=Oe(a,f))}return{key:e,first:null,c(){n=p("div");for(let s=0;s<l.length;s+=1)l[s].c();o=x(),g(n,"class","board-row svelte-16pk568"),this.first=n},m(s,f){P(s,n,f);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,null);h(n,o),u=!0},p(s,f){t=s,f&31&&(i=ue({length:t[1]}),qe(),l=Re(l,f,c,1,t,i,r,n,Fe,Oe,o,He),Xe())},i(s){if(!u){for(let f=0;f<i.length;f+=1)X(l[f]);u=!0}},o(s){for(let f=0;f<l.length;f+=1)U(l[f]);u=!1},d(s){s&&I(n);for(let f=0;f<l.length;f+=1)l[f].d()}}}function dt(e){let t,n=[],l=new Map,r,o=ue({length:e[2]});const u=i=>"row-"+i[7];for(let i=0;i<o.length;i+=1){let c=je(e,o,i),s=u(c);l.set(s,n[i]=Me(s,c))}return{c(){t=p("div");for(let i=0;i<n.length;i+=1)n[i].c();g(t,"class","board-container")},m(i,c){P(i,t,c);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null);r=!0},p(i,[c]){c&31&&(o=ue({length:i[2]}),qe(),n=Re(n,c,u,1,i,o,l,t,Fe,Me,null,je),Xe())},i(i){if(!r){for(let c=0;c<o.length;c+=1)X(n[c]);r=!0}},o(i){for(let c=0;c<n.length;c+=1)U(n[c]);r=!1},d(i){i&&I(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function ht(e,t,n){let l,r;E(e,fe,c=>n(1,l=c)),E(e,de,c=>n(2,r=c));let{board:o=[]}=t;function u(c,s){return c*l+s}function i(c){const s=c.detail.index;let f=o;f[s].alive=!f[s].alive,n(0,o=f)}return e.$$set=c=>{"board"in c&&n(0,o=c.board)},[o,l,r,u,i]}class gt extends ge{constructor(t){super(),he(this,t,ht,dt,Z,{board:0})}}class pt{constructor({board:t,torusEnabled:n,boardWidth:l,boardHeight:r}){M(this,"board");M(this,"torusEnabled");M(this,"boardWidth");M(this,"boardHeight");this.board=t,this.torusEnabled=n,this.boardWidth=l,this.boardHeight=r}async nextBoard(){let t=[];for(let n=0;n<this.board.length;n++){let l=new oe;l.alive=this.checkNeighbours(n),t.push(l)}return t}checkNeighbours(t){const l=this.getAllNeighbours(t).reduce((o,u)=>o+(u.alive?1:0),0),r=this.board[t].alive;return r&&l<2?!1:r&&(l===2||l===3)?!0:r&&l>3?!1:!r&&l===3?!0:r}getAllNeighbours(t){let n=[],l=[],r=this.getCellXY(t),o=[{x:r.x-1,y:r.y-1},{x:r.x,y:r.y-1},{x:r.x+1,y:r.y-1},{x:r.x-1,y:r.y},{x:r.x+1,y:r.y},{x:r.x-1,y:r.y+1},{x:r.x,y:r.y+1},{x:r.x+1,y:r.y+1}];for(const u of o)if(this.torusEnabled||u.x>=0&&u.y<this.boardHeight-1&&u.y>=0&&u.x<this.boardWidth-1)if(this.torusEnabled){let i=this.calculateTorus(u);l.push(this.getCellIndex(i.x,i.y))}else l.push(this.getCellIndex(u.x,u.y));for(const u of l)n.push(this.board[u]);return n}getCellXY(t){const n=t%this.boardWidth,l=Math.floor(t/this.boardWidth);return{x:n,y:l}}getCellIndex(t,n){return n*this.boardWidth+t}calculateTorus({x:t,y:n}){let l={x:t,y:n};return t<0&&(l.x=this.boardWidth-1),t>=this.boardWidth&&(l.x=0),n<0&&(l.y=this.boardHeight-1),n>=this.boardHeight&&(l.y=0),l}}function bt(e){let t,n,l,r,o,u,i;return n=new ut({}),n.$on("clearBoard",e[2]),n.$on("randomBoard",e[1]),u=new gt({props:{board:e[0]}}),{c(){t=p("main"),ye(n.$$.fragment),l=x(),r=p("hr"),o=x(),ye(u.$$.fragment),Je(r,"width","100%"),g(t,"class","svelte-ly2m3s")},m(c,s){P(c,t,s),ce(n,t,null),h(t,l),h(t,r),h(t,o),ce(u,t,null),i=!0},p(c,[s]){const f={};s&1&&(f.board=c[0]),u.$set(f)},i(c){i||(X(n.$$.fragment,c),X(u.$$.fragment,c),i=!0)},o(c){U(n.$$.fragment,c),U(u.$$.fragment,c),i=!1},d(c){c&&I(t),ae(n),ae(u)}}}function _t(e,t,n){let l,r,o,u;E(e,de,a=>n(3,r=a)),E(e,fe,a=>n(4,o=a)),E(e,xe,a=>n(6,u=a));let i=0;re.subscribe(a=>{a&&l!=null?i=setInterval(f,200):clearInterval(i)});function c(){n(0,l=Array.from({length:r*o},()=>{let a=new oe;return a.alive=Math.random()>=.75,a}))}function s(){n(0,l=Array.from({length:o*r},()=>new oe))}async function f(){const a=new pt({board:l,torusEnabled:u,boardWidth:o,boardHeight:r});n(0,l=await a.nextBoard())}return e.$$.update=()=>{e.$$.dirty&24&&n(0,l=Array.from({length:o*r},()=>new oe))},[l,c,s,r,o]}class mt extends ge{constructor(t){super(),he(this,t,_t,bt,Z,{})}}new mt({target:document.getElementById("app")});
