var De=Object.defineProperty;var Ke=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>Ke(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function S(){}function Te(e){return e()}function Ae(){return Object.create(null)}function F(e){e.forEach(Te)}function je(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ue(e){return Object.keys(e).length===0}function Ve(e,...t){if(e==null){for(const l of t)l(void 0);return S}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function x(e,t,n){e.$$.on_destroy.push(Ve(t,n))}function h(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function A(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function se(e){return document.createTextNode(e)}function v(){return se(" ")}function Je(){return se("")}function B(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ue(e){return e===""?null:+e}function Qe(e){return Array.from(e.childNodes)}function W(e,t){e.value=t??""}function Ze(e,t,n,l){e.style.setProperty(t,n,"")}function et(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}let Q;function J(e){Q=e}function tt(){if(!Q)throw new Error("Function called outside component initialization");return Q}function ze(){const e=tt();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=et(t,n,{cancelable:l});return r.slice().forEach(u=>{u.call(e,o)}),!o.defaultPrevented}return!0}}const D=[],He=[];let K=[];const Ie=[],nt=Promise.resolve();let me=!1;function lt(){me||(me=!0,nt.then(Xe))}function ye(e){K.push(e)}const _e=new Set;let R=0;function Xe(){if(R!==0)return;const e=Q;do{try{for(;R<D.length;){const t=D[R];R++,J(t),rt(t.$$)}}catch(t){throw D.length=0,R=0,t}for(J(null),D.length=0,R=0;He.length;)He.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];_e.has(n)||(_e.add(n),n())}K.length=0}while(D.length);for(;Ie.length;)Ie.pop()();me=!1,_e.clear(),J(e)}function rt(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ye)}}function ot(e){const t=[],n=[];K.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),K=t}const re=new Set;let z;function Fe(){z={r:0,c:[],p:z}}function Ge(){z.r||F(z.c),z=z.p}function X(e,t){e&&e.i&&(re.delete(e),e.i(t))}function U(e,t,n,l){if(e&&e.o){if(re.has(e))return;re.add(e),z.c.push(()=>{re.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function ce(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Re(e,t){U(e,1,1,()=>{t.delete(e.key)})}function Ye(e,t,n,l,r,o,u,s,c,i,f,a){let k=e.length,b=o.length,y=k;const H={};for(;y--;)H[e[y].key]=y;const E=[],I=new Map,q=new Map,M=[];for(y=b;y--;){const d=a(r,o,y),_=n(d);let m=u.get(_);m?M.push(()=>m.p(d,t)):(m=i(_,d),m.c()),I.set(_,E[y]=m),_ in H&&q.set(_,Math.abs(y-H[_]))}const G=new Set,N=new Set;function P(d){X(d,1),d.m(s,f),u.set(d.key,d),f=d.first,b--}for(;k&&b;){const d=E[b-1],_=e[k-1],m=d.key,w=_.key;d===_?(f=d.first,k--,b--):I.has(w)?!u.has(m)||G.has(m)?P(d):N.has(w)?k--:q.get(m)>q.get(w)?(N.add(m),P(d)):(G.add(w),k--):(c(_,u),k--)}for(;k--;){const d=e[k];I.has(d.key)||c(d,u)}for(;b;)P(E[b-1]);return F(M),E}function we(e){e&&e.c()}function ae(e,t,n){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),ye(()=>{const o=e.$$.on_mount.map(Te).filter(je);e.$$.on_destroy?e.$$.on_destroy.push(...o):F(o),e.$$.on_mount=[]}),r.forEach(ye)}function fe(e,t){const n=e.$$;n.fragment!==null&&(ot(n.after_update),F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function it(e,t){e.$$.dirty[0]===-1&&(D.push(e),lt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ge(e,t,n,l,r,o,u=null,s=[-1]){const c=Q;J(e);const i=e.$$={fragment:null,ctx:[],props:o,update:S,not_equal:r,bound:Ae(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:Ae(),dirty:s,skip_bound:!1,root:t.target||c.$$.root};u&&u(i.root);let f=!1;if(i.ctx=n?n(e,t.props||{},(a,k,...b)=>{const y=b.length?b[0]:k;return i.ctx&&r(i.ctx[a],i.ctx[a]=y)&&(!i.skip_bound&&i.bound[a]&&i.bound[a](y),f&&it(e,a)),k}):[],i.update(),f=!0,F(i.before_update),i.fragment=l?l(i.ctx):!1,t.target){if(t.hydrate){const a=Qe(t.target);i.fragment&&i.fragment.l(a),a.forEach(A)}else i.fragment&&i.fragment.c();t.intro&&X(e.$$.fragment),ae(e,t.target,t.anchor),Xe()}J(c)}class pe{constructor(){O(this,"$$");O(this,"$$set")}$destroy(){fe(this,1),this.$destroy=S}$on(t,n){if(!je(n))return S;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!Ue(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const st="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(st);const Y=[];function V(e,t=S){let n;const l=new Set;function r(s){if(Z(e,s)&&(e=s,n)){const c=!Y.length;for(const i of l)i[1](),Y.push(i,e);if(c){for(let i=0;i<Y.length;i+=2)Y[i][0](Y[i+1]);Y.length=0}}}function o(s){r(s(e))}function u(s,c=S){const i=[s,c];return l.add(i),l.size===1&&(n=t(r,o)||S),s(e),()=>{l.delete(i),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:u}}const de=V(38),he=V(14),ve=V("#CC3300"),ke=V("#15172B"),Ce=V(!1),oe=V(!1);function ut(e){let t,n,l,r,o,u,s,c,i,f,a,k,b,y,H,E,I,q,M,G,N,P,d,_,m,w,Ee,ee,xe,te,qe,T,Be,Ne,j,$e,ne,Se,le,be,We;return{c(){t=p("h1"),t.textContent="Game of life",n=v(),l=p("div"),r=p("div"),o=p("p"),o.textContent="Board size:",u=v(),s=p("input"),c=v(),i=p("p"),i.textContent="X",f=v(),a=p("input"),k=v(),b=p("div"),y=p("p"),y.textContent="Cell dead color:",H=v(),E=p("input"),I=v(),q=p("div"),M=p("p"),M.textContent="Cell alive color:",G=v(),N=p("input"),P=v(),d=p("div"),_=p("p"),_.textContent="Torus enabled:",m=v(),w=p("input"),Ee=v(),ee=p("button"),ee.textContent="Random board",xe=v(),te=p("button"),te.textContent="Clear board",qe=v(),T=p("button"),Be=se("Start"),Ne=v(),j=p("button"),$e=se("Pause"),Se=v(),le=p("button"),le.innerHTML='<a target="_blank" href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">How to play</a>',g(o,"class","settings-label"),g(s,"class","settings-input"),g(s,"placeholder","0"),g(s,"type","number"),g(s,"max","101"),g(a,"class","settings-input"),g(a,"placeholder","0"),g(a,"type","number"),g(a,"max","101"),g(r,"class","settings-element svelte-nwqiiq"),g(y,"class","settings-label"),g(E,"class","settings-input"),g(E,"type","color"),g(b,"class","settings-element svelte-nwqiiq"),g(M,"class","settings-label"),g(N,"class","settings-input"),g(N,"type","color"),g(q,"class","settings-element svelte-nwqiiq"),g(_,"class","settings-label"),g(w,"class","settings-input"),g(w,"type","checkbox"),g(d,"class","settings-element svelte-nwqiiq"),T.disabled=e[5],g(T,"class","controll-button svelte-nwqiiq"),j.disabled=ne=!e[5],g(j,"class","controll-button svelte-nwqiiq"),g(le,"class","controll-button svelte-nwqiiq"),g(l,"class","settings svelte-nwqiiq")},m(C,$){L(C,t,$),L(C,n,$),L(C,l,$),h(l,r),h(r,o),h(r,u),h(r,s),W(s,e[0]),h(r,c),h(r,i),h(r,f),h(r,a),W(a,e[1]),h(l,k),h(l,b),h(b,y),h(b,H),h(b,E),W(E,e[2]),h(l,I),h(l,q),h(q,M),h(q,G),h(q,N),W(N,e[3]),h(l,P),h(l,d),h(d,_),h(d,m),h(d,w),W(w,e[4]),h(l,Ee),h(l,ee),h(l,xe),h(l,te),h(l,qe),h(l,T),h(T,Be),h(l,Ne),h(l,j),h(j,$e),h(l,Se),h(l,le),be||(We=[B(s,"input",e[9]),B(s,"input",e[7]),B(a,"input",e[10]),B(a,"input",e[8]),B(E,"input",e[11]),B(N,"input",e[12]),B(w,"change",e[13]),B(ee,"click",e[14]),B(te,"click",e[15]),B(T,"click",e[16]),B(j,"click",e[17])],be=!0)},p(C,[$]){$&1&&ue(s.value)!==C[0]&&W(s,C[0]),$&2&&ue(a.value)!==C[1]&&W(a,C[1]),$&4&&W(E,C[2]),$&8&&W(N,C[3]),$&16&&W(w,C[4]),$&32&&(T.disabled=C[5]),$&32&&ne!==(ne=!C[5])&&(j.disabled=ne)},i:S,o:S,d(C){C&&(A(t),A(n),A(l)),be=!1,F(We)}}}function ct(e,t,n){let l,r,o,u,s,c;x(e,he,d=>n(18,l=d)),x(e,de,d=>n(19,r=d)),x(e,ke,d=>n(2,o=d)),x(e,ve,d=>n(3,u=d)),x(e,Ce,d=>n(4,s=d)),x(e,oe,d=>n(5,c=d));const i=ze();let f=r,a=l;function k(d){const _=d.currentTarget.value;let m=parseInt(_)||0,w=m>101?101:m;de.set(w),n(0,f=w)}function b(d){const _=d.currentTarget.value;let m=parseInt(_)||0,w=m>101?101:m;he.set(w),n(1,a=w)}function y(){f=ue(this.value),n(0,f)}function H(){a=ue(this.value),n(1,a)}function E(){o=this.value,ke.set(o)}function I(){u=this.value,ve.set(u)}function q(){s=this.value,Ce.set(s)}return[f,a,o,u,s,c,i,k,b,y,H,E,I,q,()=>i("randomBoard"),()=>i("clearBoard"),()=>oe.set(!0),()=>oe.set(!1)]}class at extends pe{constructor(t){super(),ge(this,t,ct,ut,Z,{})}}class ie{constructor(){O(this,"alive");this.alive=!1}}function ft(e){let t,n,l,r;return{c(){t=p("button"),g(t,"class","cell svelte-gburun"),g(t,"style",n=e[0].alive?"background-color: "+e[1]:"background-color: "+e[2])},m(o,u){L(o,t,u),l||(r=B(t,"click",e[3]),l=!0)},p(o,[u]){u&7&&n!==(n=o[0].alive?"background-color: "+o[1]:"background-color: "+o[2])&&g(t,"style",n)},i:S,o:S,d(o){o&&A(t),l=!1,r()}}}function dt(e,t,n){let l,r;x(e,ve,i=>n(1,l=i)),x(e,ke,i=>n(2,r=i));let{cell:o}=t,{cell_index:u}=t;const s=ze();function c(){s("switchState",{index:u})}return e.$$set=i=>{"cell"in i&&n(0,o=i.cell),"cell_index"in i&&n(4,u=i.cell_index)},[o,l,r,c,u]}class ht extends pe{constructor(t){super(),ge(this,t,dt,ft,Z,{cell:0,cell_index:4})}}function Me(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function Oe(e,t,n){const l=e.slice();return l[5]=t[n],l[9]=n,l}function Le(e,t){let n,l,r;return l=new ht({props:{cell_index:t[3](t[7],t[9]),cell:t[0][t[3](t[7],t[9])]}}),l.$on("switchState",t[4]),{key:e,first:null,c(){n=Je(),we(l.$$.fragment),this.first=n},m(o,u){L(o,n,u),ae(l,o,u),r=!0},p(o,u){t=o;const s={};u&6&&(s.cell_index=t[3](t[7],t[9])),u&7&&(s.cell=t[0][t[3](t[7],t[9])]),l.$set(s)},i(o){r||(X(l.$$.fragment,o),r=!0)},o(o){U(l.$$.fragment,o),r=!1},d(o){o&&A(n),fe(l,o)}}}function Pe(e,t){let n,l=[],r=new Map,o,u,s=ce({length:t[1]});const c=i=>"cell-"+i[9];for(let i=0;i<s.length;i+=1){let f=Oe(t,s,i),a=c(f);r.set(a,l[i]=Le(a,f))}return{key:e,first:null,c(){n=p("div");for(let i=0;i<l.length;i+=1)l[i].c();o=v(),g(n,"class","board-row svelte-16pk568"),this.first=n},m(i,f){L(i,n,f);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,null);h(n,o),u=!0},p(i,f){t=i,f&31&&(s=ce({length:t[1]}),Fe(),l=Ye(l,f,c,1,t,s,r,n,Re,Le,o,Oe),Ge())},i(i){if(!u){for(let f=0;f<s.length;f+=1)X(l[f]);u=!0}},o(i){for(let f=0;f<l.length;f+=1)U(l[f]);u=!1},d(i){i&&A(n);for(let f=0;f<l.length;f+=1)l[f].d()}}}function gt(e){let t,n=[],l=new Map,r,o=ce({length:e[2]});const u=s=>"row-"+s[7];for(let s=0;s<o.length;s+=1){let c=Me(e,o,s),i=u(c);l.set(i,n[s]=Pe(i,c))}return{c(){t=p("div");for(let s=0;s<n.length;s+=1)n[s].c();g(t,"class","board-container")},m(s,c){L(s,t,c);for(let i=0;i<n.length;i+=1)n[i]&&n[i].m(t,null);r=!0},p(s,[c]){c&31&&(o=ce({length:s[2]}),Fe(),n=Ye(n,c,u,1,s,o,l,t,Re,Pe,null,Me),Ge())},i(s){if(!r){for(let c=0;c<o.length;c+=1)X(n[c]);r=!0}},o(s){for(let c=0;c<n.length;c+=1)U(n[c]);r=!1},d(s){s&&A(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function pt(e,t,n){let l,r;x(e,de,c=>n(1,l=c)),x(e,he,c=>n(2,r=c));let{board:o=[]}=t;function u(c,i){return c*l+i}function s(c){const i=c.detail.index;let f=o;f[i].alive=!f[i].alive,n(0,o=f)}return e.$$set=c=>{"board"in c&&n(0,o=c.board)},[o,l,r,u,s]}class bt extends pe{constructor(t){super(),ge(this,t,pt,gt,Z,{board:0})}}class _t{constructor({board:t,torusEnabled:n,boardWidth:l,boardHeight:r}){O(this,"board");O(this,"torusEnabled");O(this,"boardWidth");O(this,"boardHeight");this.board=t,this.torusEnabled=n,this.boardWidth=l,this.boardHeight=r}async nextBoard(){let t=[];for(let n=0;n<this.board.length;n++){let l=new ie;l.alive=this.checkNeighbours(n),t.push(l)}return t}checkNeighbours(t){const l=this.getAllNeighbours(t).reduce((o,u)=>o+(u.alive?1:0),0),r=this.board[t].alive;return r&&l<2?!1:r&&(l===2||l===3)?!0:r&&l>3?!1:!r&&l===3?!0:r}getAllNeighbours(t){let n=[],l=[],r=this.getCellXY(t),o=[{x:r.x-1,y:r.y-1},{x:r.x,y:r.y-1},{x:r.x+1,y:r.y-1},{x:r.x-1,y:r.y},{x:r.x+1,y:r.y},{x:r.x-1,y:r.y+1},{x:r.x,y:r.y+1},{x:r.x+1,y:r.y+1}];for(const u of o)if(this.torusEnabled||u.x>=0&&u.y<this.boardHeight-1&&u.y>=0&&u.x<this.boardWidth-1)if(this.torusEnabled){let s=this.calculateTorus(u);l.push(this.getCellIndex(s.x,s.y))}else l.push(this.getCellIndex(u.x,u.y));for(const u of l)n.push(this.board[u]);return n}getCellXY(t){const n=t%this.boardWidth,l=Math.floor(t/this.boardWidth);return{x:n,y:l}}getCellIndex(t,n){return n*this.boardWidth+t}calculateTorus({x:t,y:n}){let l={x:t,y:n};return t<0&&(l.x=this.boardWidth-1),t>=this.boardWidth&&(l.x=0),n<0&&(l.y=this.boardHeight-1),n>=this.boardHeight&&(l.y=0),l}}function mt(e){let t,n,l,r,o,u,s;return n=new at({}),n.$on("clearBoard",e[2]),n.$on("randomBoard",e[1]),u=new bt({props:{board:e[0]}}),{c(){t=p("main"),we(n.$$.fragment),l=v(),r=p("hr"),o=v(),we(u.$$.fragment),Ze(r,"width","100%"),g(t,"class","svelte-ly2m3s")},m(c,i){L(c,t,i),ae(n,t,null),h(t,l),h(t,r),h(t,o),ae(u,t,null),s=!0},p(c,[i]){const f={};i&1&&(f.board=c[0]),u.$set(f)},i(c){s||(X(n.$$.fragment,c),X(u.$$.fragment,c),s=!0)},o(c){U(n.$$.fragment,c),U(u.$$.fragment,c),s=!1},d(c){c&&A(t),fe(n),fe(u)}}}function yt(e,t,n){let l,r,o,u;x(e,he,a=>n(3,r=a)),x(e,de,a=>n(4,o=a)),x(e,Ce,a=>n(6,u=a));let s=0;oe.subscribe(a=>{a&&l!=null?s=setInterval(f,200):clearInterval(s)});function c(){n(0,l=Array.from({length:r*o},()=>{let a=new ie;return a.alive=Math.random()>=.75,a}))}function i(){n(0,l=Array.from({length:o*r},()=>new ie))}async function f(){const a=new _t({board:l,torusEnabled:u,boardWidth:o,boardHeight:r});n(0,l=await a.nextBoard())}return e.$$.update=()=>{e.$$.dirty&24&&n(0,l=Array.from({length:o*r},()=>new ie))},[l,c,i,r,o]}class wt extends pe{constructor(t){super(),ge(this,t,yt,mt,Z,{})}}new wt({target:document.getElementById("app")});
