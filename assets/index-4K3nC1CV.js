var De=Object.defineProperty;var Ke=(e,t,n)=>t in e?De(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var O=(e,t,n)=>Ke(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))l(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const u of o.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&l(u)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();function W(){}function Te(e){return e()}function He(){return Object.create(null)}function F(e){e.forEach(Te)}function ze(e){return typeof e=="function"}function Z(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}function Ue(e){return Object.keys(e).length===0}function Ve(e,...t){if(e==null){for(const l of t)l(void 0);return W}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function E(e,t,n){e.$$.on_destroy.push(Ve(t,n))}function h(e,t){e.appendChild(t)}function L(e,t,n){e.insertBefore(t,n||null)}function H(e){e.parentNode&&e.parentNode.removeChild(e)}function p(e){return document.createElement(e)}function ie(e){return document.createTextNode(e)}function v(){return ie(" ")}function Je(){return ie("")}function N(e,t,n,l){return e.addEventListener(t,n,l),()=>e.removeEventListener(t,n,l)}function g(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ue(e){return e===""?null:+e}function Qe(e){return Array.from(e.childNodes)}function A(e,t){e.value=t??""}function Ze(e,t,n,l){e.style.setProperty(t,n,"")}function et(e,t,{bubbles:n=!1,cancelable:l=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:l})}let Q;function J(e){Q=e}function tt(){if(!Q)throw new Error("Function called outside component initialization");return Q}function qe(){const e=tt();return(t,n,{cancelable:l=!1}={})=>{const r=e.$$.callbacks[t];if(r){const o=et(t,n,{cancelable:l});return r.slice().forEach(u=>{u.call(e,o)}),!o.defaultPrevented}return!0}}const D=[],Ie=[];let K=[];const je=[],nt=Promise.resolve();let me=!1;function lt(){me||(me=!0,nt.then(Xe))}function ye(e){K.push(e)}const _e=new Set;let R=0;function Xe(){if(R!==0)return;const e=Q;do{try{for(;R<D.length;){const t=D[R];R++,J(t),rt(t.$$)}}catch(t){throw D.length=0,R=0,t}for(J(null),D.length=0,R=0;Ie.length;)Ie.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];_e.has(n)||(_e.add(n),n())}K.length=0}while(D.length);for(;je.length;)je.pop()();me=!1,_e.clear(),J(e)}function rt(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ye)}}function ot(e){const t=[],n=[];K.forEach(l=>e.indexOf(l)===-1?t.push(l):n.push(l)),n.forEach(l=>l()),K=t}const re=new Set;let q;function Fe(){q={r:0,c:[],p:q}}function Ge(){q.r||F(q.c),q=q.p}function X(e,t){e&&e.i&&(re.delete(e),e.i(t))}function U(e,t,n,l){if(e&&e.o){if(re.has(e))return;re.add(e),q.c.push(()=>{re.delete(e),l&&(n&&e.d(1),l())}),e.o(t)}else l&&l()}function ce(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Re(e,t){U(e,1,1,()=>{t.delete(e.key)})}function Ye(e,t,n,l,r,o,u,i,c,s,f,a){let x=e.length,b=o.length,y=x;const I={};for(;y--;)I[e[y].key]=y;const C=[],j=new Map,B=new Map,M=[];for(y=b;y--;){const d=a(r,o,y),_=n(d);let m=u.get(_);m?M.push(()=>m.p(d,t)):(m=s(_,d),m.c()),j.set(_,C[y]=m),_ in I&&B.set(_,Math.abs(y-I[_]))}const G=new Set,$=new Set;function P(d){X(d,1),d.m(i,f),u.set(d.key,d),f=d.first,b--}for(;x&&b;){const d=C[b-1],_=e[x-1],m=d.key,w=_.key;d===_?(f=d.first,x--,b--):j.has(w)?!u.has(m)||G.has(m)?P(d):$.has(w)?x--:B.get(m)>B.get(w)?($.add(m),P(d)):(G.add(w),x--):(c(_,u),x--)}for(;x--;){const d=e[x];j.has(d.key)||c(d,u)}for(;b;)P(C[b-1]);return F(M),C}function we(e){e&&e.c()}function ae(e,t,n){const{fragment:l,after_update:r}=e.$$;l&&l.m(t,n),ye(()=>{const o=e.$$.on_mount.map(Te).filter(ze);e.$$.on_destroy?e.$$.on_destroy.push(...o):F(o),e.$$.on_mount=[]}),r.forEach(ye)}function fe(e,t){const n=e.$$;n.fragment!==null&&(ot(n.after_update),F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function st(e,t){e.$$.dirty[0]===-1&&(D.push(e),lt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ge(e,t,n,l,r,o,u=null,i=[-1]){const c=Q;J(e);const s=e.$$={fragment:null,ctx:[],props:o,update:W,not_equal:r,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:He(),dirty:i,skip_bound:!1,root:t.target||c.$$.root};u&&u(s.root);let f=!1;if(s.ctx=n?n(e,t.props||{},(a,x,...b)=>{const y=b.length?b[0]:x;return s.ctx&&r(s.ctx[a],s.ctx[a]=y)&&(!s.skip_bound&&s.bound[a]&&s.bound[a](y),f&&st(e,a)),x}):[],s.update(),f=!0,F(s.before_update),s.fragment=l?l(s.ctx):!1,t.target){if(t.hydrate){const a=Qe(t.target);s.fragment&&s.fragment.l(a),a.forEach(H)}else s.fragment&&s.fragment.c();t.intro&&X(e.$$.fragment),ae(e,t.target,t.anchor),Xe()}J(c)}class pe{constructor(){O(this,"$$");O(this,"$$set")}$destroy(){fe(this,1),this.$destroy=W}$on(t,n){if(!ze(n))return W;const l=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return l.push(n),()=>{const r=l.indexOf(n);r!==-1&&l.splice(r,1)}}$set(t){this.$$set&&!Ue(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const it="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(it);const Y=[];function V(e,t=W){let n;const l=new Set;function r(i){if(Z(e,i)&&(e=i,n)){const c=!Y.length;for(const s of l)s[1](),Y.push(s,e);if(c){for(let s=0;s<Y.length;s+=2)Y[s][0](Y[s+1]);Y.length=0}}}function o(i){r(i(e))}function u(i,c=W){const s=[i,c];return l.add(s),l.size===1&&(n=t(r,o)||W),i(e),()=>{l.delete(s),l.size===0&&n&&(n(),n=null)}}return{set:r,update:o,subscribe:u}}const de=V(38),he=V(14),ve=V("#CC3300"),xe=V("#15172B"),ke=V(!1),oe=V(!1);function ut(e){let t,n,l,r,o,u,i,c,s,f,a,x,b,y,I,C,j,B,M,G,$,P,d,_,m,w,Ce,ee,Ee,te,Be,T,Ne,$e,z,Se,ne,We,le,be,Ae;return{c(){t=p("h1"),t.textContent="Game of life",n=v(),l=p("div"),r=p("div"),o=p("p"),o.textContent="Board size:",u=v(),i=p("input"),c=v(),s=p("p"),s.textContent="X",f=v(),a=p("input"),x=v(),b=p("div"),y=p("p"),y.textContent="Cell dead color:",I=v(),C=p("input"),j=v(),B=p("div"),M=p("p"),M.textContent="Cell alive color:",G=v(),$=p("input"),P=v(),d=p("div"),_=p("p"),_.textContent="Torus enabled:",m=v(),w=p("input"),Ce=v(),ee=p("button"),ee.textContent="Random board",Ee=v(),te=p("button"),te.textContent="Clear board",Be=v(),T=p("button"),Ne=ie("Start"),$e=v(),z=p("button"),Se=ie("Pause"),We=v(),le=p("button"),le.innerHTML='<a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life">How to play</a>',g(o,"class","settings-label"),g(i,"class","settings-input"),g(i,"placeholder","0"),g(i,"type","number"),g(i,"max","101"),g(a,"class","settings-input"),g(a,"placeholder","0"),g(a,"type","number"),g(a,"max","101"),g(r,"class","settings-element svelte-13lxjxc"),g(y,"class","settings-label"),g(C,"class","settings-input"),g(C,"type","color"),g(b,"class","settings-element svelte-13lxjxc"),g(M,"class","settings-label"),g($,"class","settings-input"),g($,"type","color"),g(B,"class","settings-element svelte-13lxjxc"),g(_,"class","settings-label"),g(w,"class","settings-input"),g(w,"type","checkbox"),g(d,"class","settings-element svelte-13lxjxc"),T.disabled=e[5],g(T,"class","controll-button svelte-13lxjxc"),z.disabled=ne=!e[5],g(z,"class","controll-button svelte-13lxjxc"),g(le,"class","controll-button svelte-13lxjxc"),g(l,"class","settings svelte-13lxjxc")},m(k,S){L(k,t,S),L(k,n,S),L(k,l,S),h(l,r),h(r,o),h(r,u),h(r,i),A(i,e[0]),h(r,c),h(r,s),h(r,f),h(r,a),A(a,e[1]),h(l,x),h(l,b),h(b,y),h(b,I),h(b,C),A(C,e[2]),h(l,j),h(l,B),h(B,M),h(B,G),h(B,$),A($,e[3]),h(l,P),h(l,d),h(d,_),h(d,m),h(d,w),A(w,e[4]),h(l,Ce),h(l,ee),h(l,Ee),h(l,te),h(l,Be),h(l,T),h(T,Ne),h(l,$e),h(l,z),h(z,Se),h(l,We),h(l,le),be||(Ae=[N(i,"input",e[9]),N(i,"input",e[7]),N(a,"input",e[10]),N(a,"input",e[8]),N(C,"input",e[11]),N($,"input",e[12]),N(w,"change",e[13]),N(ee,"click",e[14]),N(te,"click",e[15]),N(T,"click",e[16]),N(z,"click",e[17])],be=!0)},p(k,[S]){S&1&&ue(i.value)!==k[0]&&A(i,k[0]),S&2&&ue(a.value)!==k[1]&&A(a,k[1]),S&4&&A(C,k[2]),S&8&&A($,k[3]),S&16&&A(w,k[4]),S&32&&(T.disabled=k[5]),S&32&&ne!==(ne=!k[5])&&(z.disabled=ne)},i:W,o:W,d(k){k&&(H(t),H(n),H(l)),be=!1,F(Ae)}}}function ct(e,t,n){let l,r,o,u,i,c;E(e,he,d=>n(18,l=d)),E(e,de,d=>n(19,r=d)),E(e,xe,d=>n(2,o=d)),E(e,ve,d=>n(3,u=d)),E(e,ke,d=>n(4,i=d)),E(e,oe,d=>n(5,c=d));const s=qe();let f=r,a=l;function x(d){const _=d.currentTarget.value;let m=parseInt(_)||0,w=m>101?101:m;de.set(w),n(0,f=w)}function b(d){const _=d.currentTarget.value;let m=parseInt(_)||0,w=m>101?101:m;he.set(w),n(1,a=w)}function y(){f=ue(this.value),n(0,f)}function I(){a=ue(this.value),n(1,a)}function C(){o=this.value,xe.set(o)}function j(){u=this.value,ve.set(u)}function B(){i=this.value,ke.set(i)}return[f,a,o,u,i,c,s,x,b,y,I,C,j,B,()=>s("randomBoard"),()=>s("clearBoard"),()=>oe.set(!0),()=>oe.set(!1)]}class at extends pe{constructor(t){super(),ge(this,t,ct,ut,Z,{})}}class se{constructor(){O(this,"alive");this.alive=!1}}function ft(e){let t,n,l,r;return{c(){t=p("button"),g(t,"class","cell svelte-gburun"),g(t,"style",n=e[0].alive?"background-color: "+e[1]:"background-color: "+e[2])},m(o,u){L(o,t,u),l||(r=N(t,"click",e[3]),l=!0)},p(o,[u]){u&7&&n!==(n=o[0].alive?"background-color: "+o[1]:"background-color: "+o[2])&&g(t,"style",n)},i:W,o:W,d(o){o&&H(t),l=!1,r()}}}function dt(e,t,n){let l,r;E(e,ve,s=>n(1,l=s)),E(e,xe,s=>n(2,r=s));let{cell:o}=t,{cell_index:u}=t;const i=qe();function c(){i("switchState",{index:u})}return e.$$set=s=>{"cell"in s&&n(0,o=s.cell),"cell_index"in s&&n(4,u=s.cell_index)},[o,l,r,c,u]}class ht extends pe{constructor(t){super(),ge(this,t,dt,ft,Z,{cell:0,cell_index:4})}}function Me(e,t,n){const l=e.slice();return l[5]=t[n],l[7]=n,l}function Oe(e,t,n){const l=e.slice();return l[5]=t[n],l[9]=n,l}function Le(e,t){let n,l,r;return l=new ht({props:{cell_index:t[3](t[7],t[9]),cell:t[0][t[3](t[7],t[9])]}}),l.$on("switchState",t[4]),{key:e,first:null,c(){n=Je(),we(l.$$.fragment),this.first=n},m(o,u){L(o,n,u),ae(l,o,u),r=!0},p(o,u){t=o;const i={};u&6&&(i.cell_index=t[3](t[7],t[9])),u&7&&(i.cell=t[0][t[3](t[7],t[9])]),l.$set(i)},i(o){r||(X(l.$$.fragment,o),r=!0)},o(o){U(l.$$.fragment,o),r=!1},d(o){o&&H(n),fe(l,o)}}}function Pe(e,t){let n,l=[],r=new Map,o,u,i=ce({length:t[1]});const c=s=>"cell-"+s[9];for(let s=0;s<i.length;s+=1){let f=Oe(t,i,s),a=c(f);r.set(a,l[s]=Le(a,f))}return{key:e,first:null,c(){n=p("div");for(let s=0;s<l.length;s+=1)l[s].c();o=v(),g(n,"class","board-row svelte-16pk568"),this.first=n},m(s,f){L(s,n,f);for(let a=0;a<l.length;a+=1)l[a]&&l[a].m(n,null);h(n,o),u=!0},p(s,f){t=s,f&31&&(i=ce({length:t[1]}),Fe(),l=Ye(l,f,c,1,t,i,r,n,Re,Le,o,Oe),Ge())},i(s){if(!u){for(let f=0;f<i.length;f+=1)X(l[f]);u=!0}},o(s){for(let f=0;f<l.length;f+=1)U(l[f]);u=!1},d(s){s&&H(n);for(let f=0;f<l.length;f+=1)l[f].d()}}}function gt(e){let t,n=[],l=new Map,r,o=ce({length:e[2]});const u=i=>"row-"+i[7];for(let i=0;i<o.length;i+=1){let c=Me(e,o,i),s=u(c);l.set(s,n[i]=Pe(s,c))}return{c(){t=p("div");for(let i=0;i<n.length;i+=1)n[i].c();g(t,"class","board-container")},m(i,c){L(i,t,c);for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(t,null);r=!0},p(i,[c]){c&31&&(o=ce({length:i[2]}),Fe(),n=Ye(n,c,u,1,i,o,l,t,Re,Pe,null,Me),Ge())},i(i){if(!r){for(let c=0;c<o.length;c+=1)X(n[c]);r=!0}},o(i){for(let c=0;c<n.length;c+=1)U(n[c]);r=!1},d(i){i&&H(t);for(let c=0;c<n.length;c+=1)n[c].d()}}}function pt(e,t,n){let l,r;E(e,de,c=>n(1,l=c)),E(e,he,c=>n(2,r=c));let{board:o=[]}=t;function u(c,s){return c*l+s}function i(c){const s=c.detail.index;let f=o;f[s].alive=!f[s].alive,n(0,o=f)}return e.$$set=c=>{"board"in c&&n(0,o=c.board)},[o,l,r,u,i]}class bt extends pe{constructor(t){super(),ge(this,t,pt,gt,Z,{board:0})}}class _t{constructor({board:t,torusEnabled:n,boardWidth:l,boardHeight:r}){O(this,"board");O(this,"torusEnabled");O(this,"boardWidth");O(this,"boardHeight");this.board=t,this.torusEnabled=n,this.boardWidth=l,this.boardHeight=r}async nextBoard(){let t=[];for(let n=0;n<this.board.length;n++){let l=new se;l.alive=this.checkNeighbours(n),t.push(l)}return t}checkNeighbours(t){const l=this.getAllNeighbours(t).reduce((o,u)=>o+(u.alive?1:0),0),r=this.board[t].alive;return r&&l<2?!1:r&&(l===2||l===3)?!0:r&&l>3?!1:!r&&l===3?!0:r}getAllNeighbours(t){let n=[],l=[],r=this.getCellXY(t),o=[{x:r.x-1,y:r.y-1},{x:r.x,y:r.y-1},{x:r.x+1,y:r.y-1},{x:r.x-1,y:r.y},{x:r.x+1,y:r.y},{x:r.x-1,y:r.y+1},{x:r.x,y:r.y+1},{x:r.x+1,y:r.y+1}];for(const u of o)if(this.torusEnabled||u.x>=0&&u.y<this.boardHeight-1&&u.y>=0&&u.x<this.boardWidth-1)if(this.torusEnabled){let i=this.calculateTorus(u);l.push(this.getCellIndex(i.x,i.y))}else l.push(this.getCellIndex(u.x,u.y));for(const u of l)n.push(this.board[u]);return n}getCellXY(t){const n=t%this.boardWidth,l=Math.floor(t/this.boardWidth);return{x:n,y:l}}getCellIndex(t,n){return n*this.boardWidth+t}calculateTorus({x:t,y:n}){let l={x:t,y:n};return t<0&&(l.x=this.boardWidth-1),t>=this.boardWidth&&(l.x=0),n<0&&(l.y=this.boardHeight-1),n>=this.boardHeight&&(l.y=0),l}}function mt(e){let t,n,l,r,o,u,i;return n=new at({}),n.$on("clearBoard",e[2]),n.$on("randomBoard",e[1]),u=new bt({props:{board:e[0]}}),{c(){t=p("main"),we(n.$$.fragment),l=v(),r=p("hr"),o=v(),we(u.$$.fragment),Ze(r,"width","100%"),g(t,"class","svelte-ly2m3s")},m(c,s){L(c,t,s),ae(n,t,null),h(t,l),h(t,r),h(t,o),ae(u,t,null),i=!0},p(c,[s]){const f={};s&1&&(f.board=c[0]),u.$set(f)},i(c){i||(X(n.$$.fragment,c),X(u.$$.fragment,c),i=!0)},o(c){U(n.$$.fragment,c),U(u.$$.fragment,c),i=!1},d(c){c&&H(t),fe(n),fe(u)}}}function yt(e,t,n){let l,r,o,u;E(e,he,a=>n(3,r=a)),E(e,de,a=>n(4,o=a)),E(e,ke,a=>n(6,u=a));let i=0;oe.subscribe(a=>{a&&l!=null?i=setInterval(f,200):clearInterval(i)});function c(){n(0,l=Array.from({length:r*o},()=>{let a=new se;return a.alive=Math.random()>=.75,a}))}function s(){n(0,l=Array.from({length:o*r},()=>new se))}async function f(){const a=new _t({board:l,torusEnabled:u,boardWidth:o,boardHeight:r});n(0,l=await a.nextBoard())}return e.$$.update=()=>{e.$$.dirty&24&&n(0,l=Array.from({length:o*r},()=>new se))},[l,c,s,r,o]}class wt extends pe{constructor(t){super(),ge(this,t,yt,mt,Z,{})}}new wt({target:document.getElementById("app")});
